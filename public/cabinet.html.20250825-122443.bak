<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>KarmaSystem — Личный кабинет</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet"/>
  <link rel="stylesheet" href="/styles.css"/>
</head>
<body class="dashboard-body">
  <div class="dashboard-layout">
    <aside class="sidebar">
      <div class="sidebar-brand">
        <div class="logo-img"><img src="/assets/logo.png" onerror="this.style.display='none'" alt="KS" style="width:28px;height:28px;object-fit:contain"/></div>
        <span class="brand-text">KarmaSystem</span>
      </div>
      <nav class="sidebar-nav">
        <a class="nav-item active" href="/cabinet">🟢 Обзор</a>
        <a class="nav-item" href="/cabinet/cards">📇 Карточки</a>
      </nav>
      <footer class="sidebar-footer">© KarmaSystem</footer>
    </aside>

    <main class="dashboard-main">
      <header class="topbar">
        <div class="topbar-title">Обзор</div>
        <a href="/" class="btn btn-primary" style="margin-left:auto;margin-right:12px;">На главную</a>
        <div class="profile-chip">Д</div>
      </header>

      <section class="page visible" id="page-overview">
        <div class="stats-grid">
          <div class="stat-card"><div class="stat-label">Посетители</div><div class="stat-value">12 630</div></div>
          <div class="stat-card"><div class="stat-label">Сканов QR</div><div class="stat-value">3 450</div></div>
          <div class="stat-card"><div class="stat-label">Конверсия</div><div class="stat-value">27,3 %</div></div>
        </div>
        <div class="charts-grid">
          <div class="chart-card"><div class="chart-title">Карточки</div><canvas id="barChart" width="640" height="280"></canvas></div>
          <div class="chart-card"><div class="chart-title">Карта активности</div><div class="map-placeholder"></div></div>
        </div>
      </section>
    </main>
  </div>
  <script>
    // простой ч/б бар-чарт
    (function(){
      const c=document.getElementById('barChart'); if(!c) return;
      const ctx=c.getContext('2d'), W=c.width,H=c.height, p=32, data=[4,5,6,7,8,9], max=Math.max(...data)+1;
      ctx.globalAlpha=.15; ctx.strokeStyle='#9CA3AF';
      for(let i=0;i<=4;i++){const y=p+i*((H-p*2)/4); ctx.beginPath(); ctx.moveTo(p,y); ctx.lineTo(W-p,y); ctx.stroke();}
      ctx.globalAlpha=1; ctx.fillStyle='#111';
      const bw=(W-p*2)/data.length*.6, g=(W-p*2)/data.length*.4;
      data.forEach((v,i)=>{const h=(v/max)*(H-p*2), x=p+i*(bw+g)+g/2, y=H-p-h; ctx.fillRect(x,y,bw,h);});
    })();
  </script>
</body>
</html>
