# Нагрузочное тестирование

Этот модуль содержит конфигурацию и скрипты для нагрузочного тестирования приложения.

## Подготовка к тестированию

1. Установите зависимости:
   ```bash
   pip install -r requirements.txt
   ```

2. Настройте переменные окружения в файле `.env`:
   ```
   TARGET_HOST=http://your-api-url:port
   TEST_USER=test@example.com
   TEST_PASSWORD=yourpassword
   ```

## Запуск тестов

### Быстрый старт

Запустите все тесты с настройками по умолчанию:

```bash
.\run_tests.ps1
```

### Параметры запуска

```
.\run_tests.ps1 -targetHost http://localhost:8000 -duration 60 -envFile ..\..\.env
```

- `targetHost` - URL тестируемого сервера
- `duration` - длительность каждого теста в секундах
- `envFile` - путь к файлу с переменными окружения

## Сценарии тестирования

1. **Smoke Test**
   - 10 пользователей
   - Скорость нарастания: 5 пользователей/сек
   - Длительность: 30 секунд

2. **Нормальная нагрузка**
   - 100 пользователей
   - Скорость нарастания: 10 пользователей/сек
   - Длительность: 60 секунд

3. **Высокая нагрузка**
   - 500 пользователей
   - Скорость нарастания: 50 пользователей/сек
   - Длительность: 120 секунд

4. **Пиковая нагрузка**
   - 1000 пользователей
   - Скорость нарастания: 100 пользователей/сек
   - Длительность: 300 секунд

## Анализ результатов

После завершения тестов в директории `reports/` будут созданы:

- CSV-файлы с детальной статистикой
- Markdown-отчеты с основной информацией

### Интерпретация метрик

- **RPS (Requests Per Second)** - количество запросов в секунду
- **Response Time (ms)** - время отклика (медиана, 95-й процентиль, 99-й процентиль)
- **Error Rate** - процент ошибочных запросов
- **Throughput** - пропускная способность (запросов/сек)

### Рекомендации

- **RPS < 1000**: Возможны проблемы с производительностью
- **Response Time > 1s**: Требуется оптимизация
- **Error Rate > 1%**: Необходимо изучить ошибки

## Ручной запуск тестов

Для ручного запуска с настройкой параметров:

```bash
locust -f locustfile.py --headless --users 100 --spawn-rate 10 --run-time 1m --host http://localhost:8000
```

## Визуальный мониторинг

Для интерактивного мониторинга:

```bash
locust -f locustfile.py --host http://localhost:8000
```

Откройте http://localhost:8089 в браузере для доступа к веб-интерфейсу Locust.
